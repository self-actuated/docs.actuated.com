
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Realise the potential of blazingly fast builds.">
      
      
        <meta name="author" content="OpenFaaS Ltd">
      
      
        <link rel="canonical" href="https://docs.actuated.com/install-agent/">
      
      
        <link rel="prev" href="../provision-server/">
      
      
        <link rel="next" href="../test-build/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Install the Agent - Actuated</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto,+Helvetica:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto, Helvetica";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-PTK21TFJ7V"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-PTK21TFJ7V",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-PTK21TFJ7V",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#add-your-first-agent-to-actuated" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Actuated" class="md-header__button md-logo" aria-label="Actuated" data-md-component="logo">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Actuated
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Install the Agent
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/self-actuated" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    self-actuated/actuated
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Actuated" class="md-nav__button md-logo" aria-label="Actuated" data-md-component="logo">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    Actuated
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/self-actuated" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    self-actuated/actuated
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Overview
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dashboard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dashboard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../roadmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roadmap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contact/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contact us
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Onboarding
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Onboarding
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../register/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Register your GitHub Organisation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../provision-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Provision a Server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Install the Agent
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Install the Agent
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pick-your-actuated-servers" class="md-nav__link">
    <span class="md-ellipsis">
      Pick your Actuated Servers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#review-the-end-user-license-agreement-eula" class="md-nav__link">
    <span class="md-ellipsis">
      Review the End User License Agreement (EULA)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auto-enrollment" class="md-nav__link">
    <span class="md-ellipsis">
      Auto Enrollment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manual-enrollment" class="md-nav__link">
    <span class="md-ellipsis">
      Manual Enrollment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next steps
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Next steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#other-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Other considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-options-for-the-installsh-script" class="md-nav__link">
    <span class="md-ellipsis">
      Installation options for the install.sh script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../test-build/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run a test build
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Tasks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tasks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/right-size-vm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Right Size the VM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/registry-mirror/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup a Registry Mirror
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/debug-ssh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debug a job with SSH
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Set-up the CLI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/local-github-cache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup self-hosted cache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/system-info/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Info
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/matrix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Job Matrix
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/kernel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Compile a Kernel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/k3s/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes with K3s
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/kind/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes with KinD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/matrix-k8s/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes regression matrix
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker run/build
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/openfaas-publish/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Publish an OpenFaaS function
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/openfaas-helm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploy a Helm chart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/custom-vm-size/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom VM sizes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/github-actions-cache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using caching in builds
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Advanced examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Advanced examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/gpu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GPU support in jobs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/kvm-guest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run a KVM guest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/multiarch-buildx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi-arch images with buildx
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pick-your-actuated-servers" class="md-nav__link">
    <span class="md-ellipsis">
      Pick your Actuated Servers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#review-the-end-user-license-agreement-eula" class="md-nav__link">
    <span class="md-ellipsis">
      Review the End User License Agreement (EULA)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auto-enrollment" class="md-nav__link">
    <span class="md-ellipsis">
      Auto Enrollment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manual-enrollment" class="md-nav__link">
    <span class="md-ellipsis">
      Manual Enrollment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next steps
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Next steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#other-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Other considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-options-for-the-installsh-script" class="md-nav__link">
    <span class="md-ellipsis">
      Installation options for the install.sh script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="add-your-first-agent-to-actuated">Add your first agent to actuated<a class="headerlink" href="#add-your-first-agent-to-actuated" title="Permanent link">&para;</a></h1>
<p>actuated is split into three parts:</p>
<ol>
<li>An Actuated Agent (agent) that you run on your own machines or VMs (server), which can launch a VM with a single-use GitHub Actions runner.</li>
<li>A VM image launched by the agent, with all the preinstalled software found on a hosted GitHub Actions runner.</li>
<li>Our own control plane that talks to GitHub on your behalf, and schedules builds across your fleet of agents.</li>
</ol>
<p>All we need you to do is to install our agent on one or more servers, then we take care of the rest. We'll even be able to tell you if your server goes offline for any reason.</p>
<div class="admonition info">
<p class="admonition-title">Have you registered your organisation yet?</p>
<p>Before you can add an agent, you or your GitHub organisation admin will need to install the: <a href="https://docs.actuated.com/register/#install-the-github-app">Actuated GitHub App</a>.</p>
</div>
<h3 id="pick-your-actuated-servers">Pick your Actuated Servers<a class="headerlink" href="#pick-your-actuated-servers" title="Permanent link">&para;</a></h3>
<p>Pick your Actuated Servers carefully using our guide: <a href="/provision-server">Pick a host for actuated</a></p>
<h2 id="review-the-end-user-license-agreement-eula">Review the End User License Agreement (EULA)<a class="headerlink" href="#review-the-end-user-license-agreement-eula" title="Permanent link">&para;</a></h2>
<p>Make sure you've read the <a href="https://github.com/self-actuated/actuated/blob/master/EULA.md">Actuated EULA</a> before registering your organisation with the actuated GitHub App, or starting the agent binary on one of your hosts.</p>
<p>If you missed it in the "Provision a Server" page, we recommend you use Ubuntu 22.04 as the host operating system on your Server.</p>
<h2 id="auto-enrollment">Auto Enrollment<a class="headerlink" href="#auto-enrollment" title="Permanent link">&para;</a></h2>
<div class="admonition info">
<p class="admonition-title">New! Automated agent installation in preview</p>
<p>As of Oct 2023, there's a new and automated onboarding experience for Actuated's Agent.</p>
<p>This is a significant improvement over the previous manual installation process, making it easier and faster to get started with Actuated.</p>
<p>We're running the Auto Enrollment in parallel with the manual process (see next section) while we gather feedback from users.</p>
</div>
<p>You'll need to obtain an <em>Account API Token</em> to install your agents using this approach.</p>
<p>Enter the following into cloud-init/userdata or run it manually on the server after connecting with SSH:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

curl<span class="w"> </span>-LSsf<span class="w"> </span>https://get.actuated.com<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">LICENSE</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="nv">TOKEN</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="nv">HOME</span><span class="o">=</span><span class="s2">&quot;/root&quot;</span><span class="w"> </span>bash<span class="w"> </span>-
</code></pre></div>
<p>Minimum configuration:</p>
<ul>
<li><code>TOKEN</code> - your Account API Token - reach out to us and we'll generate one for you</li>
<li><code>LICENSE</code> - the key you received when you <a href="https://actuated.com/pricing">purchased an actuated subscription</a>
cache layers pulled anonymously</li>
<li><code>HOME</code> - Set this only if using cloud-init/userdata - where HOME is usually unset. Otherwise leave it blank and the script will use the current user's home directory.</li>
</ul>
<p>Additional configuration:</p>
<ul>
<li><code>DOCKER_USERNAME</code> and <code>DOCKER_PASSWORD</code> - your Docker Hub credentials for the pull-through cache. <a href="https://docs.docker.com/security/access-tokens/">Create a token here</a> or leave empty to </li>
<li><code>LABELS</code> - apply a comma-separated list of labels to the agent, e.g. <code>gce</code> or <code>gce,ssd</code></li>
<li><code>SAN</code> - use this option if autodetecting the host's IP address is not working properly, add <code>SAN=$(curl -sfSL https://checkip.amazonaws.com)</code> as an extra environment variable</li>
</ul>
<p>Storage configuration:</p>
<ul>
<li><code>VM_DEV</code> - a disk or partition to use for VM storage - leave blank for to autodetect a spare disk. If no disk is found, a loopback file will be used. If the wrong disk is being detected, you may need to wipe any existing filesystem signatures first with <code>wipefs -a /dev/sdX</code>. Or, just specify the <code>VM_DEV</code> variable manually after having logged in and run <code>lsblk</code>.</li>
</ul>
<p>The installation will guess the best place to store VM snapshots, and if a space disk or partition is found, it will be wiped and formatted.</p>
<p>Notes on Autoenrolled Agent lifecycle:</p>
<ul>
<li>They appear immediately in the Actuated Dashboard, and via the <code>actuated-cli runners</code> command.</li>
<li>Any Autoenrolled agent that has been offline for 15 minutes will be removed automatically.</li>
</ul>
<p>The Actuated Dashboard has instructions for installing the CLI.</p>
<h2 id="manual-enrollment">Manual Enrollment<a class="headerlink" href="#manual-enrollment" title="Permanent link">&para;</a></h2>
<div class="admonition info">
<p class="admonition-title">Do you want a free, expert installation?</p>
<p>Our team can install the agent and configure the server for you. Just request our public SSH key, and add it to <code>.ssh/authorized_keys</code> and create a DNS A or CNAME record for your server, and send all the details over to us on the Actuated Slack.</p>
<p>Alternatively, you can run through the semi-automatic installation with the details below.</p>
</div>
<ol>
<li>
<p>Install your license for actuated</p>
<p>The license is available in the email you received when you purchased your subscription. If someone else bought the subscription, they should be able to forward it to you.</p>
<p>Run the following, then paste in your license, hit enter once, then Control + D to save the file.</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>-p<span class="w"> </span>~/.actuated
cat<span class="w"> </span>&gt;<span class="w"> </span>~/.actuated/LICENSE
</code></pre></div>
</li>
<li>
<p>Download the Actuated Agent and installation script to the server</p>
<blockquote>
<p>Setting up an ARM64 agent? Wherever you see <code>agent</code> in a command, change it to: <code>agent-arm64</code>. So instead of <code>agent keygen</code> you'd run <code>agent-arm64 keygen</code>.</p>
</blockquote>
<p>Install <a href="https://github.com/alexellis/arkade">arkade</a> using the command below, or download it from the <a href="https://github.com/alexellis/arkade/releases">releases page</a>.</p>
<p>Download the latest agent and install the binary to <code>/usr/local/bin/</code>:</p>
<div class="highlight"><pre><span></span><code><span class="o">(</span>
<span class="c1"># Install arkade</span>
curl<span class="w"> </span>-sLS<span class="w"> </span>https://get.arkade.dev<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>sh

<span class="c1"># Use arkade to extract the agent from its OCI container image</span>
arkade<span class="w"> </span>oci<span class="w"> </span>install<span class="w"> </span>ghcr.io/openfaasltd/actuated-agent:latest<span class="w"> </span>--path<span class="w"> </span>./agent
chmod<span class="w"> </span>+x<span class="w"> </span>./agent/agent*
sudo<span class="w"> </span>mv<span class="w"> </span>./agent/agent*<span class="w"> </span>/usr/local/bin/
<span class="o">)</span>
</code></pre></div>
<p>The install.sh script installs required dependencies such as: containerd, CNI plugins, and the Firecracker binary.</p>
<p><strong>For best performance</strong>, a dedicated drive, volume or partition is required to store the filesystems for running VMs. If you do not have a volume or extra drive attached, then you can shrink the root partition, and use the resulting free space.</p>
<p>Two storage backends are supported. By default the agent uses <a href="https://en.wikipedia.org/wiki/Device_mapper">Device mapper</a>. Alternatively the agent can use ZFS volumes within a ZFS pool.</p>
<p>The disk space allocated to job runners can be configured by setting the <code>BASE_SIZE</code> environment variable. The default is <code>30GB</code> which is generally sufficient for most teams.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:4"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Devmapper (recommended)</label><label for="__tabbed_1_2">Devmapper loopback</label><label for="__tabbed_1_3">ZFS</label><label for="__tabbed_1_4">ZFS loopback</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>The <code>VM_DEV</code> variable should be set with a disk or partition that can be formatted for VM storage.</p>
<div class="highlight"><pre><span></span><code><span class="o">(</span>
<span class="nb">cd</span><span class="w"> </span>agent
<span class="nv">VM_DEV</span><span class="o">=</span>/dev/nvme0n2<span class="w"> </span>sudo<span class="w"> </span>-E<span class="w"> </span>./install.sh
<span class="o">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>If you do not have additional storage available at this time you can omit the <code>VM_DEV</code> variable and the installer will generate a loopback filesystem for you.</p>
<div class="highlight"><pre><span></span><code><span class="o">(</span>
<span class="nb">cd</span><span class="w"> </span>agent
sudo<span class="w"> </span>-E<span class="w"> </span>./install.sh
<span class="o">)</span>
</code></pre></div>
<p>The default size of the loopback file is <code>200GB</code> which is stored at <code>/var/lib/containerd/devmapper</code>.</p>
</div>
<div class="tabbed-block">
<p>The script will create a ZFS pool and dataset for you. If you want to manually setup ZFS or use an existing ZFS pool or dataset see <a href="#installation-options">ZFS Configuration</a>.</p>
<p>The <code>VM_DEV</code> variable should be set with a disk or partition that can be formatted for ZFS storage.</p>
<div class="highlight"><pre><span></span><code><span class="o">(</span>
<span class="nb">cd</span><span class="w"> </span>agent
<span class="nv">VM_DEV</span><span class="o">=</span>/dev/nvme0n2<span class="w"> </span><span class="nv">STORAGE</span><span class="o">=</span>zfs<span class="w"> </span>sudo<span class="w"> </span>-E<span class="w"> </span>./install.sh
<span class="o">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>If you do not have additional storage available at this time you can omit the <code>VM_DEV</code> variable and the installer will generate a loopback filesystem for you.</p>
<div class="highlight"><pre><span></span><code><span class="o">(</span>
<span class="nb">cd</span><span class="w"> </span>agent
<span class="nv">STORAGE</span><span class="o">=</span>zfs<span class="w"> </span>sudo<span class="w"> </span>-E<span class="w"> </span>./install.sh
<span class="o">)</span>
</code></pre></div>
</div>
</div>
</div>
</li>
<li>
<p>Generate your enrollment file</p>
<p>You'll need to create a DNS A or CNAME record for each server you add to actuated, this could be something like <code>server1.example.com</code> for instance.</p>
<p>Run the following to create an enrollment file at <code>$HOME/.actuated/agent.yaml</code>:</p>
<blockquote>
<p>For an Arm server run <code>agent-arm64</code> instead of <code>agent</code></p>
</blockquote>
<div class="highlight"><pre><span></span><code>agent<span class="w"> </span>enroll<span class="w"> </span>--url<span class="w"> </span>https://server1.example.com
</code></pre></div>
<p>The enrollment file contains:</p>
<ul>
<li>The hostname of the server</li>
<li>The public key of the agent which we use to encrypt tokens sent to the agent to bootstrap runners to GitHub Actions</li>
<li>A unique API token encrypted with our public key, which is used by the control plane to authenticate each message sent to the agent</li>
</ul>
</li>
<li>
<p>Configure and start the agent</p>
<p>Use the <code>install-service</code> command to configure and install a systemd service to start the actuated agent.</p>
<p>The actuated control plane will only communicate with agents exposed over HTTPS to ensure proper encryption is in place. An API token is used in addition with the TLS connection for all requests.</p>
<p>Any bootstrap tokens sent to the agent are further encrypted with the agent's public key.</p>
<p>For hosts with public IPs, you will need to use the built-in TLS provisioning with Let's Encrypt. For hosts behind a firewall, NAT or in a private datacenter, you can <a href="/expose-agent/">use inlets</a> to create a secure tunnel to the agent.</p>
<p>We're considering other models for after the pilot, for instance GitHub's own API has the runner make an outbound connection and uses long-polling.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Expose the agent on the Internet with HTTPS</label><label for="__tabbed_2_2">Run the agent from a private network</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>The easiest way to configure everything is to run as root. The --user flag can be used to run under a custom user account, however sudo access is still required for actuated.</p>
<p>For an <em>x86_64</em> server, run:</p>
<div class="highlight"><pre><span></span><code><span class="nv">DOMAIN</span><span class="o">=</span>agent1.example.com
<span class="c1"># Replace with &quot;zfs&quot; if you opted for ZFS storage in the installation script.</span>
<span class="nv">STORAGE</span><span class="o">=</span>devmapper

sudo<span class="w"> </span>-E<span class="w"> </span>agent<span class="w"> </span>install-service<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--letsencrypt-domain<span class="w"> </span><span class="nv">$DOMAIN</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--letsencrypt-email<span class="w"> </span>webmaster@<span class="nv">$DOMAIN</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--storage<span class="w"> </span><span class="nv">$STORAGE</span>
</code></pre></div>
<p>For an <em>Arm</em> server, run:</p>
<div class="highlight"><pre><span></span><code><span class="nv">DOMAIN</span><span class="o">=</span>agent1.example.com
<span class="c1"># Replace with &quot;zfs&quot; if you opted for ZFS storage in the installation script.</span>
<span class="nv">STORAGE</span><span class="o">=</span>devmapper

sudo<span class="w"> </span>-E<span class="w"> </span>agent-arm64<span class="w"> </span>install-service<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--letsencrypt-domain<span class="w"> </span><span class="nv">$DOMAIN</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--letsencrypt-email<span class="w"> </span>webmaster@<span class="nv">$DOMAIN</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--storage<span class="w"> </span><span class="nv">$STORAGE</span>
</code></pre></div>
<blockquote>
<p>Note the different binary name: <code>agent-arm64</code></p>
</blockquote>
</div>
<div class="tabbed-block">
<p>For an Actuated Agent behind an <a href="https://inlets.dev">inlets tunnel</a>, do not include the <code>--letsencrypt-*</code> flags, and instead add <code>--listen-addr "127.0.0.1:"</code>. See <a href="/expose-agent/">expose the agent with HTTPS</a> for instructions on how the setup inlets.</p>
<p>The easiest way to configure everything is to run as root. The --user flag can be used to run under a custom user account, however sudo access is still required for actuated</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Replace with &quot;zfs&quot; if you opted for ZFS storage in the installation script.</span>
<span class="nv">STORAGE</span><span class="o">=</span>devmapper

sudo<span class="w"> </span>-E<span class="w"> </span>agent<span class="w"> </span>install-service<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--listen-addr<span class="w"> </span><span class="s2">&quot;127.0.0.1:&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--storage<span class="w"> </span><span class="nv">$STORAGE</span>
</code></pre></div>
</div>
</div>
</div>
<p>If you need to make changes you can run the command again, or edit <code>/etc/default/actuated</code>.</p>
<p>Check the service's status with:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>actuated
sudo<span class="w"> </span>journalctl<span class="w"> </span>-u<span class="w"> </span>actuated<span class="w"> </span>--since<span class="w"> </span>today<span class="w"> </span>-f
</code></pre></div>
</li>
<li>
<p>Check that the control-plane is accessible</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-i<span class="w"> </span>https://server1.example.com
</code></pre></div>
<p>A correct response is a <em>403</em>.</p>
</li>
<li>
<p>Send us your agent's connection info</p>
<p>Share the <code>$HOME/.actuated/agent.yaml</code> file with us so we can add your agent to the actuated control plane.</p>
<p>We'll let you know once we've added your agent to actuated and then it's over to you to start running your builds.</p>
<p>Once you've run our test build, you need to run the steps for systemd mentioned above.</p>
</li>
</ol>
<h2 id="next-steps">Next steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h2>
<p>You can now start your first build and see it run on your actuated agent.</p>
<p><a href="/test-build">Start a build on your agent</a></p>
<div class="highlight"><pre><span></span><code>name: ci

on: push

jobs:
<span class="w"> </span> build-golang:
<span class="gd">-    runs-on: ubuntu-latest</span>
<span class="gi">+    runs-on: actuated-4cpu-16gb</span>
</code></pre></div>
<p>The amount of RAM and CPU can be picked independently.</p>
<p>For Arm servers change the prefix from <code>actuated-</code> to <code>actuated-arm64</code>:</p>
<div class="highlight"><pre><span></span><code>name: ci

on: push

jobs:
<span class="w"> </span> build-golang:
<span class="gd">-    runs-on: ubuntu-latest</span>
<span class="gi">+    runs-on: actuated-arm64-8cpu-32gb</span>
</code></pre></div>
<blockquote>
<p>You can also specify <code>actuated-any-4cpu-8gb</code> if you don't mind whether the job runs on one of your amd64 or arm64 servers.</p>
</blockquote>
<h3 id="other-considerations">Other considerations<a class="headerlink" href="#other-considerations" title="Permanent link">&para;</a></h3>
<p>If you'd like to install a firewall, <a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-20-04">ufw</a> should be relatively quick to configure.</p>
<p>You will need the following ports open:</p>
<ul>
<li><code>443</code> - the encrypted control plane for actuated</li>
<li><code>80</code> - used with Let's Encrypt to obtain a TLS certificate during the HTTP01 challenge</li>
<li><code>22</code> - we recommend leaving port 22 open so that you can log into the machine with SSH, if needed. You could also change this to a high or random port</li>
</ul>
<p>We do not recommend restricting outgoing traffic on the server as this will probably cause you issues with your builds.</p>
<p>See also: <a href="/troubleshooting">Troubleshooting your agent</a></p>
<h3 id="installation-options-for-the-installsh-script">Installation options for the <code>install.sh</code> script<a class="headerlink" href="#installation-options-for-the-installsh-script" title="Permanent link">&para;</a></h3>
<p>When no options are given, all the defaults are assumed, which uses devmapper with a loopback file for VM storage, which is suitable for basic exploration or light use.</p>
<p>Dedicated disks or partitions with devmapper or ZFS is recommended for production use.</p>
<p>General options:</p>
<table>
<thead>
<tr>
<th>ENV</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>VM_DEV</code></td>
<td>Disk or partition to use for VM storage. If omitted a loopback file will be created.</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>STORAGE</code></td>
<td>Storage backend to use for VM storage. Options are <code>devmapper</code> or <code>zfs</code>.</td>
<td><code>devmapper</code></td>
</tr>
<tr>
<td><code>BASE_SIZE</code></td>
<td>Base size of each VM filesystem.</td>
<td><code>30GB</code></td>
</tr>
</tbody>
</table>
<p>ZFS-specific options:</p>
<table>
<thead>
<tr>
<th>ENV</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ZPOOL</code></td>
<td>Name of the ZFS pool to use or create for ZFS storage.</td>
<td><code>actuated_zpool</code></td>
</tr>
<tr>
<td><code>ZFS_DATASET</code></td>
<td>Name of the ZFS dataset to use or create for ZFS .</td>
<td><code>${ZPOOL}/snapshots}</code></td>
</tr>
</tbody>
</table>
<p>The install script will automatically try to create a ZFS pool and dataset if you have opted for ZFS storage in the installation script and they do not already exist.</p>
<p>If you have an existing pool or dataset that you want to use or if you want to create them manually you can configure the script to use them</p>
<div class="highlight"><pre><span></span><code><span class="nv">STORAGE</span><span class="o">=</span>zfs<span class="w"> </span><span class="nv">ZPOOL</span><span class="o">=</span>mypool<span class="w"> </span><span class="nv">ZFS_DATASET</span><span class="o">=</span>mypool/actuated<span class="w"> </span>sudo<span class="w"> </span>./install.sh
</code></pre></div>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 OpenFaaS Ltd

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tracking", "navigation.sections", "navigation.expand"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>